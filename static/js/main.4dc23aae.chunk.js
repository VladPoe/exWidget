(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){e.exports={page:"errorScreen_page__3UNtk",title:"errorScreen_title__1Xhh3",message:"errorScreen_message__1XkSv",infoWrap:"errorScreen_infoWrap__JW06V",decorWrap:"errorScreen_decorWrap__Gxkk_",btnWrap:"errorScreen_btnWrap__1eBxW",animation:"errorScreen_animation__L2iO3",mTomRound:"errorScreen_mTomRound__3ceX-","btn-wrap":"errorScreen_btn-wrap__2udjQ"}},2:function(e,t,n){e.exports={exchangeWidget:"exchangeWidget_exchangeWidget__2_VgS",wrap:"exchangeWidget_wrap__2PQUt",partConvertFrom:"exchangeWidget_partConvertFrom__3XwxU",navWrap:"exchangeWidget_navWrap__3ck7d",partConvertTo:"exchangeWidget_partConvertTo__2FBok",container:"exchangeWidget_container__2wwhg",form:"exchangeWidget_form__18NU6",currencyStateElem:"exchangeWidget_currencyStateElem__Jkz1e",heading:"exchangeWidget_heading__1VxT5",off:"exchangeWidget_off__3BUMU",label:"exchangeWidget_label__25tyP",labelRight:"exchangeWidget_labelRight__2MTPF",small:"exchangeWidget_small__3kG3d",sumInputWrap:"exchangeWidget_sumInputWrap__uL8Tn",sumInput:"exchangeWidget_sumInput__CYtQB",inputTip:"exchangeWidget_inputTip__2TtYB",on:"exchangeWidget_on__3-OZV",exchangeResult:"exchangeWidget_exchangeResult__3bknv",header:"exchangeWidget_header__1TE6j",exchangeBtn:"exchangeWidget_exchangeBtn__QRNdm",sign:"exchangeWidget_sign__2f-Ia"}},20:function(e,t,n){e.exports={elem:"navigation_elem__3GC1V",list:"navigation_list__1dgLs",item:"navigation_item__LcPye",btn:"navigation_btn__2Fnxy",active:"navigation_active___MHKS"}},21:function(e,t,n){e.exports={preloader:"preloader_preloader__P5Kfv",inner:"preloader_inner__xqPfn",spinner:"preloader_spinner__-vy9e",rotate:"preloader_rotate__lwHjw",path:"preloader_path__2L80I",dash:"preloader_dash__JfZh3",messageWrap:"preloader_messageWrap__1U3on"}},34:function(e,t,n){e.exports={btn:"commonButton_btn__2FZp6"}},35:function(e,t,n){e.exports=n.p+"static/media/astronaut.8aa75ecb.svg"},41:function(e,t,n){e.exports=n(63)},46:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var a,r,c,o,u=n(0),s=n.n(u),i=n(28),l=n.n(i),m=(n(46),n(9)),p=n(10),d=n(12),f=n(11),h=n(13),g=n(6),b=n(18),_=n(69),E={setCrucialError:Object(_.a)("SET_CRUCIAL_ERROR",function(e){return e}),setUserData:Object(_.a)("SET_USER_DATA",function(e){return e}),setRates:Object(_.a)("SET_RATES",function(e){return e}),setUserCurrency:Object(_.a)("SET_USER_CURRENCY",function(e){return e}),setExchangeFromCurrency:Object(_.a)("SET_EXCHANGE_FROM_CURRENCY",function(e){return e}),setExchangeToCurrency:Object(_.a)("SET_EXCHANGE_TO_CURRENCY",function(e){return e}),setExchangeSum:Object(_.a)("SET_EXCHANGE_SUM",function(e){return e}),setIsExchangeSumAvailable:Object(_.a)("IS_EXCHANGE_SUM_AVAILABLE",function(e){return e}),updateUserBalance:Object(_.a)("UPDATE_USER_BALANCE",function(e){return e}),manageScreenBlocking:Object(_.a)("MANAGE_SCREEN_BLOCKING",function(e){return e}),setPreloaderMessage:Object(_.a)("SET_PRELOADER_MESSAGE",function(e){return e})},v=n(5),y={EUR:{shortName:"eur",fullName:"Euro",code:"EUR",number:978,symbol:"\u20ac",htmlCode:"&euro;"},USD:{shortName:"usd",fullName:"US Dollar",code:"USD",number:840,symbol:"$",htmlCode:"&#36;"},GBP:{shortName:"gbp",fullName:"Pound Sterling",code:"GBP",number:826,symbol:"\xa3",htmlCode:"&pound;"},JPY:{shortName:"jpy",fullName:"Japanese Yen",code:"JPY",number:392,symbol:"\xa5",htmlCode:"&yen;"}},O={name:"Vlad",surname:"Pocheptcov",mainCurrency:y.USD.code,account:{EUR:{symbol:y.EUR.code,amount:"2100"},USD:{symbol:y.USD.code,amount:"4623.05"},GBP:{symbol:y.GBP.code,amount:"4319.49"},JPY:{symbol:y.JPY.code,amount:"35123.48"}}},x=(a=O,function(){return new Promise(function(e,t){setTimeout(function(){return e(a)},2800)})}),j=function(e){return(t=e.status)>=200&&t<300?Promise.resolve(e):Promise.reject("API response: ".concat(e.statusText));var t},C=function(e){return e.json()},S=function(e){return k.BASE_URL+e+"?app_id=".concat(k.KEY)},N=function(e){return k.BASE_URL+e+"?app_id=".concat(k.FAKE_KEY)},R=function(e){return function(t){return function(n){return Object.entries(n).reduce(function(e,t){var n=Object(b.a)(t,2),a=n[0],r=n[1];return e+"&".concat(a,"=").concat(r)},e(t))}}},W=function(e){return fetch(e).then(j).then(C)},k={KEY:"45df0613a845463591657cc7242dd4c0",FAKE_KEY:"qwerty12345",BASE_URL:"https://openexchangerates.org/api"},A="/latest.json",U={getBasicRates:function(){var e=A,t={base:O.mainCurrency,symbols:Object.values(y).map(function(e){return e.code}).join(",")},n=R(S)(e)(t);return W(n)},getBasicRatesWithError:function(){var e=A,t={base:O.baseSymbol,symbols:"".concat(y.EUR.code,",").concat(y.USD.code,",").concat(y.GBP.code)},n=R(N)(e)(t);return console.log("url requested = ",n),W(n)}},T=n(14),B=n(31),P=n(3),w=n(67),I=Object(w.a)(Object(P.a)({},E.setCrucialError,function(e,t){var n=t.payload;return{works:!1,errorMessage:void 0===n?"Undefined error occurred. Please contact the support":n}}),{works:!0,errorMessage:""}),M=Object(w.a)((r={},Object(P.a)(r,E.setUserData,function(e,t){return t.payload}),Object(P.a)(r,E.setUserCurrency,function(e,t){var n=t.payload;return Object(v.a)({},e,{mainCurrency:n})}),Object(P.a)(r,E.updateUserBalance,function(e,t){var n=t.payload;return Object(v.a)({},e,{account:n})}),r),null),F=Object(w.a)(Object(P.a)({},E.setRates,function(e,t){return t.payload}),null),D=Object(w.a)((c={},Object(P.a)(c,E.setExchangeFromCurrency,function(e,t){var n=t.payload;return Object(v.a)({},e,{fromCurrency:n})}),Object(P.a)(c,E.setExchangeToCurrency,function(e,t){var n=t.payload;return Object(v.a)({},e,{toCurrency:n})}),Object(P.a)(c,E.setExchangeSum,function(e,t){var n=t.payload;return Object(v.a)({},e,{sum:n})}),Object(P.a)(c,E.setIsExchangeSumAvailable,function(e,t){var n=t.payload;return Object(v.a)({},e,{isAvailable:n})}),c),{fromCurrency:"",toCurrency:"",sum:"",isSumAvailable:!0}),H=Object(w.a)((o={},Object(P.a)(o,E.manageScreenBlocking,function(e,t){var n=t.payload;return Object(v.a)({},e,{preloaderBlock:Object(v.a)({},e.preloaderBlock,{isActive:n})})}),Object(P.a)(o,E.setPreloaderMessage,function(e,t){var n=t.payload,a=void 0===n?"":n;return Object(v.a)({},e,{preloaderBlock:Object(v.a)({},e.preloaderBlock,{message:a})})}),o),{preloaderBlock:{isActive:!1,message:""}}),L=Object(T.combineReducers)({appStatus:I,user:M,rates:F,exchange:D,ui:H}),Y=n(32),G=Object(T.createStore)(L,Object(B.composeWithDevTools)(Object(T.applyMiddleware)(Y.a))),J=G,K=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},X=function(e,t){var n=Object.keys(t),a=n.indexOf(e);return n[a===n.length-1?0:a+1]},q=/^$|(^\d{1,10}(\.\d{0,2})?$)/,V=n(33),Q=n.n(V),Z=function(e){return Q()(e)},$=function(e){return function(t){return e.lte(t)}},z=function(e){return function(t){return(n=Z(e),function(e){return n.div(e)})(t);var n}},ee=function(e){return function(t){return function(n){return(a=z(t)(n),function(e){return a.times(e)})(e);var a}}},te=function(e){return"We see that some error occurred because of the following reason:\n".concat(e)},ne=n(60),ae=n(65),re=n(15),ce=n.n(re),oe=n(34),ue=n.n(oe),se=function(e){return s.a.createElement("button",{type:e.type,className:ue.a.btn,onClick:e.clickHandler,title:e.title},e.text)},ie=n(35),le=n.n(ie),me=function(e){return s.a.createElement("img",{src:le.a,style:{width:e.width,height:e.height},alt:"astronaut"})};me.defaultProps={width:"40px",height:"40px"};var pe=me,de=function(e){return s.a.createElement("article",{className:ce.a.page},s.a.createElement("h4",{className:"visuallyhidden",hidden:!0},"Error"),s.a.createElement("div",{className:ce.a.infoWrap},s.a.createElement("span",{className:ce.a.title},"Oops!"),s.a.createElement("p",{className:ce.a.message},e.message),s.a.createElement("div",{className:ce.a.btnWrap},s.a.createElement(se,{text:e.buttonText,type:"button",clickHandler:e.buttonClickHandler}))),s.a.createElement("div",{className:ce.a.decorWrap},s.a.createElement("div",{className:ce.a.animation},s.a.createElement(pe,{width:"100%",height:"100%"}))))};de.defaultProps={message:"Some undetected error occurred"};var fe=de,he="/",ge=n(2),be=n.n(ge),_e=n(1),Ee=n.n(_e),ve=function(e){return s.a.createElement("div",{className:be.a.currencyStateElem},s.a.createElement("span",{className:be.a.heading},e.currency),s.a.createElement("small",{className:be.a.label,dangerouslySetInnerHTML:function(e,t){var n=y[e].symbol;return{__html:'You have <span class="'.concat(be.a.small,'">').concat(n,"</span>").concat(t)}}(e.currency,e.balance)}))};ve.propsTypes={currency:Ee.a.string.isRequired,balance:Ee.a.string.isRequired};var ye=ve,Oe=n(36),xe=function(e){return e.exchange.fromCurrency},je=function(e){return e.exchange.toCurrency},Ce=function(e){return e.user.account},Se=function(e){return e.exchange.sum},Ne=function(e){return e.user.account[e.exchange.fromCurrency].amount},Re=Object(Oe.a)([Se,Ne],function(e,t){return $(Z(e||0))(t)}),We=n(17),ke=n.n(We),Ae=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).inputRef=s.a.createRef(),n.handleSumChange=function(e){var t=e.target.value;q.test(t)&&n.props.dispatchSum(t)},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.inputRef.current.focus()}},{key:"render",value:function(){var e,t=ke()((e={},Object(P.a)(e,be.a.label,!0),Object(P.a)(e,be.a.inputTip,!0),Object(P.a)(e,be.a.on,!this.props.exchangeSum||this.props.exchangeSum&&!this.props.isAvailable),e)),n=this.props.exchangeSum?this.props.isAvailable?"":"overbalance":"type the sum";return s.a.createElement("div",{className:"".concat(be.a.sumInputWrap," ").concat(be.a.heading),"data-value":this.props.exchangeSum},this.props.exchangeSum&&s.a.createElement("span",{className:be.a.sign},"\u2014 "),s.a.createElement("input",{className:be.a.sumInput,type:"text",id:"sum",value:this.props.exchangeSum,name:"exchange-sum",onChange:this.handleSumChange,ref:this.inputRef}),s.a.createElement("label",{htmlFor:"sum",className:t},n))}}]),t}(u.Component);Ae.propsTypes={changeHandler:Ee.a.func.isRequired,value:Ee.a.string};var Ue=Object(g.b)(function(e){return{exchangeSum:Se(e),max:Ne(e),isAvailable:Re(e)}},function(e){return{dispatchSum:function(t){e(E.setExchangeSum(t))}}})(Ae),Te=function(e){return{userAccount:Ce(e),exchange:function(e){return e.exchange}(e)}},Be=function(e,t){var n=function(n){function a(){return Object(m.a)(this,a),Object(d.a)(this,Object(f.a)(a).apply(this,arguments))}return Object(h.a)(a,n),Object(p.a)(a,[{key:"render",value:function(){var n=this,a=function(e){switch(e){case"from":return n.props.exchange.fromCurrency;case"to":return n.props.exchange.toCurrency;default:return console.error("An error occurred. Please check CurrencyStatePropsProxy function to clarify"),!1}}(t);return a?s.a.createElement(e,{currency:a,balance:this.props.userAccount[a].amount}):s.a.createElement("span",null,"n/d")}}]),a}(u.Component);return Object(g.b)(Te)(n)},Pe=function(e){return{fromCurrency:xe(e),toCurrency:je(e),userCurrencies:Ce(e)}},we=function(e){return{changeFormCurrency:function(t){e(E.setExchangeFromCurrency(t))},changeToCurrency:function(t){e(E.setExchangeToCurrency(t))}}},Ie=function(e,t){var n=function(n){function a(){return Object(m.a)(this,a),Object(d.a)(this,Object(f.a)(a).apply(this,arguments))}return Object(h.a)(a,n),Object(p.a)(a,[{key:"componentDidUpdate",value:function(){this.props.fromCurrency===this.props.toCurrency&&this.props.changeToCurrency(X(this.props.fromCurrency,this.props.userCurrencies))}},{key:"render",value:function(){return s.a.createElement(e,{changeCurrencyHandler:"from"===t?this.props.changeFormCurrency:this.props.changeToCurrency,userCurrencies:this.props.userCurrencies,currentCurrency:"from"===t?this.props.fromCurrency:this.props.toCurrency})}}]),a}(u.Component);return Object(g.b)(Pe,we)(n)},Me=function(e){var t,n,a,r,c=e.exchangeSum,o=e.fromCurrency,u=e.toCurrency,i=e.rates,l=ee(c||0)(i[u])(i[o]).toFixed(2),m=ee(1)(i[u])(i[o]).toFixed(2),p=ke()((t={},Object(P.a)(t,be.a.heading,!0),Object(P.a)(t,be.a.off,!c),t));return s.a.createElement("div",{className:be.a.exchangeResult},s.a.createElement("span",{className:p},s.a.createElement("span",{className:be.a.sign},"+ "),l),s.a.createElement("small",{className:be.a.label,dangerouslySetInnerHTML:(n=o,a=u,r=m,{__html:'<span class="'.concat(be.a.small,'">').concat(y[n].symbol,"</span>")+"1 = "+'<span class="'.concat(be.a.small,'">').concat(y[a].symbol,"</span>")+"".concat(r)})}))};Me.propsTypes={exchangeSum:Ee.a.string,rate:Ee.a.string,fromCurrency:Ee.a.string,toCurrency:Ee.a.string};var Fe=Object(g.b)(function(e){return{exchangeSum:Se(e),fromCurrency:xe(e),toCurrency:je(e),rates:function(e){return e.rates.rates}(e)}})(Me),De=n(20),He=n.n(De),Le=n(37),Ye=function(e){var t=e.userCurrencies,n=e.currentCurrency,a=e.changeCurrencyHandler;return s.a.createElement("nav",{className:He.a.elem},s.a.createElement("ul",{className:He.a.list},Object.keys(t).map(function(e){var t,r;return s.a.createElement("li",{className:He.a.item,key:Object(Le.uniqueId)()},s.a.createElement("button",{className:ke()((t={},Object(P.a)(t,He.a.btn,!0),Object(P.a)(t,He.a.active,e===n),t)),type:"button",title:e,onClick:(r=e,function(){a(r)})}))})))},Ge={updateBalance:function(){return function(e,t){var n,a=t(),r=a.exchange,c=r.fromCurrency,o=r.toCurrency,u=r.sum,s=a.user.account,i=a.rates.rates,l=function(e,t,n,a,r){var c,o;return Object(v.a)({},e,(c={},Object(P.a)(c,t,{symbol:t,amount:(o=Z(e[t].amount),function(e){return o.minus(e)})(n).toFixed(2)}),Object(P.a)(c,a,{symbol:a,amount:function(e){return function(t){return e.plus(t)}}(Z(e[a].amount))(r).toFixed(2)}),c))}(s,c,u,o,ee(u)(i[o])(i[c]).toFixed(4)),m=function(){e(E.manageScreenBlocking(!1)),e(E.setPreloaderMessage(""))};e(E.manageScreenBlocking(!0)),e(E.setPreloaderMessage("Updating you account")),(n=l,new Promise(function(e,t){var a={status:200,message:"Yor balance successfully updated",balance:Object(v.a)({},n)};setTimeout(function(){return e(a)},1800)})).then(function(t){if(200!==t.status)throw Error(t.message);e(E.updateUserBalance(t.balance)),e(E.setExchangeSum("")),m()}).catch(function(t){console.log(t),e(E.setCrucialError(te(t.message))),m()})}}},Je=Object(g.b)(function(e){return{exchangeSum:Se(e),isAvailable:Re(e)}},Ge)(function(e){var t=!e.isAvailable||$(Z(e.exchangeSum||0))(0);return s.a.createElement("button",{className:be.a.exchangeBtn,type:"button",disabled:t,onClick:e.updateBalance},"Exchange")}),Ke=Be(ye,"from"),Xe=Be(ye,"to"),qe=Ie(Ye,"from"),Ve=Ie(Ye,"to"),Qe=function(){return s.a.createElement("article",{className:be.a.exchangeWidget},s.a.createElement("div",{className:be.a.wrap},s.a.createElement("header",{className:be.a.header},s.a.createElement("h1",{className:"visuallyhidden"},"Ex Widget"),s.a.createElement("div",{className:be.a.container},s.a.createElement(Je,null))),s.a.createElement("div",{className:be.a.partConvertFrom},s.a.createElement("div",{className:be.a.container},s.a.createElement("div",{className:be.a.form},s.a.createElement(Ke,null),s.a.createElement(Ue,null))),s.a.createElement("div",{className:be.a.navWrap},s.a.createElement(qe,null))),s.a.createElement("div",{className:be.a.partConvertTo},s.a.createElement("div",{className:be.a.container},s.a.createElement("div",{className:be.a.form},s.a.createElement(Xe,null),s.a.createElement(Fe,null))),s.a.createElement("div",{className:be.a.navWrap},s.a.createElement(Ve,null)))))},Ze={updateRates:function(){return function(e){U.getBasicRates().then(function(t){var n=t.base,a=t.rates,r=t.timestamp,c=G.getState().rates,o={base:n,rates:a,timestamp:r};K(c,o)||e(E.setRates(o))}).catch(function(t){console.log(t),e(E.setCrucialError(te("API response ".concat(t))))})}}},$e=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).interval=null,n.state={updateInterval:1e4},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.updateRates(),this.interval=setInterval(function(){return e.props.updateRates()},this.state.updateInterval)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return s.a.createElement(Qe,null)}}]),t}(u.Component),ze=Object(g.b)(null,Ze)($e),et=function(){window.location.reload()},tt=function(e){return e.doesAppWorks?s.a.createElement(ae.a,null,s.a.createElement(ne.a,{path:he,exact:!0,render:function(){return s.a.createElement(ze,null)}}),s.a.createElement(ne.a,{render:function(){return s.a.createElement(fe,{message:"Page not found",buttonText:"Home",buttonClickHandler:(t=e.history,function(){t.push("/")})});var t}})):s.a.createElement(ne.a,{render:function(){return s.a.createElement(fe,{message:e.errorMessage,buttonText:"Reload",buttonClickHandler:et})}})},nt=n(66),at=n(21),rt=n.n(at),ct=function(e){return e.isActive&&s.a.createElement("div",{className:rt.a.preloader},s.a.createElement("div",{className:rt.a.inner},e.message&&s.a.createElement("div",{className:rt.a.messageWrap},e.message),s.a.createElement("svg",{className:rt.a.spinner,viewBox:"0 0 50 50"},s.a.createElement("circle",{className:rt.a.path,cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:"5"}))))};ct.defaultProps={isActive:!1,message:""};var ot=Object(g.b)(function(e){return{isActive:function(e){return e.ui.preloaderBlock.isActive}(e),message:function(e){return e.ui.preloaderBlock.message}(e)}})(ct),ut=function(){var e=document.getElementById("before-app-preloader");e.classList.add("hidden"),setTimeout(function(){e.remove()},400)},st={initialUpload:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null};return function(t){Promise.all([x(),U.getBasicRates()]).then(function(n){var a=Object(b.a)(n,2),r=a[0],c=a[1],o=c.base,u=c.rates,s=c.timestamp;t(E.setUserData(r)),t(E.setRates({base:o,rates:u,timestamp:s})),t(E.setExchangeFromCurrency(r.mainCurrency)),t(E.setExchangeToCurrency(X(r.mainCurrency,r.account))),e()}).catch(function(n){console.log(n),t(E.setCrucialError(te('"'.concat(n,'"')))),e()})}}},it=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={isPending:!0},n.initialUploadCallback=function(){n.setState(function(){return{isPending:!1}}),ut()},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.initialUpload(this.initialUploadCallback)}},{key:"render",value:function(){return s.a.createElement("div",{className:"app"},!this.state.isPending&&s.a.createElement(tt,this.props),s.a.createElement(ot,null))}}]),t}(u.Component),lt=Object(nt.a)(Object(g.b)(function(e){return{doesAppWorks:function(e){return e.appStatus.works}(e),errorMessage:function(e){return e.appStatus.errorMessage}(e)}},st)(it)),mt=n(68),pt=document.getElementById("root");l.a.render(s.a.createElement(g.a,{store:J},s.a.createElement(mt.a,null,s.a.createElement(lt,null))),pt)}},[[41,2,1]]]);
//# sourceMappingURL=main.4dc23aae.chunk.js.map