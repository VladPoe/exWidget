(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,n){e.exports={page:"errorScreen_page__3UNtk",title:"errorScreen_title__1Xhh3",message:"errorScreen_message__1XkSv",infoWrap:"errorScreen_infoWrap__JW06V",decorWrap:"errorScreen_decorWrap__Gxkk_",btnWrap:"errorScreen_btnWrap__1eBxW",animation:"errorScreen_animation__L2iO3",mTomRound:"errorScreen_mTomRound__3ceX-","btn-wrap":"errorScreen_btn-wrap__2udjQ"}},2:function(e,t,n){e.exports={exchangeWidget:"exchangeWidget_exchangeWidget__2_VgS",wrap:"exchangeWidget_wrap__2PQUt",partConvertFrom:"exchangeWidget_partConvertFrom__3XwxU",navWrap:"exchangeWidget_navWrap__3ck7d",partConvertTo:"exchangeWidget_partConvertTo__2FBok",container:"exchangeWidget_container__2wwhg",form:"exchangeWidget_form__18NU6",currencyStateElem:"exchangeWidget_currencyStateElem__Jkz1e",heading:"exchangeWidget_heading__1VxT5",off:"exchangeWidget_off__3BUMU",label:"exchangeWidget_label__25tyP",labelRight:"exchangeWidget_labelRight__2MTPF",small:"exchangeWidget_small__3kG3d",sumInputWrap:"exchangeWidget_sumInputWrap__uL8Tn",sumInput:"exchangeWidget_sumInput__CYtQB",inputTip:"exchangeWidget_inputTip__2TtYB",on:"exchangeWidget_on__3-OZV",exchangeResult:"exchangeWidget_exchangeResult__3bknv",header:"exchangeWidget_header__1TE6j",exchangeBtn:"exchangeWidget_exchangeBtn__QRNdm",sign:"exchangeWidget_sign__2f-Ia"}},21:function(e,t,n){e.exports={elem:"navigation_elem__3GC1V",list:"navigation_list__1dgLs",item:"navigation_item__LcPye",btn:"navigation_btn__2Fnxy",active:"navigation_active___MHKS"}},22:function(e,t,n){e.exports={preloader:"preloader_preloader__P5Kfv",inner:"preloader_inner__xqPfn",spinner:"preloader_spinner__-vy9e",rotate:"preloader_rotate__lwHjw",path:"preloader_path__2L80I",dash:"preloader_dash__JfZh3",messageWrap:"preloader_messageWrap__1U3on"}},33:function(e,t,n){e.exports={btn:"commonButton_btn__2FZp6"}},34:function(e,t,n){e.exports=n.p+"static/media/astronaut.8aa75ecb.svg"},41:function(e,t,n){e.exports=n(63)},46:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),o=n(29),u=n.n(o),s=(n(46),n(10)),i=n(11),l=n(13),m=n(12),p=n(14),d=n(4),f=n(19),g=n(69),h=Object(g.a)("SET_CRUCIAL_ERROR"),b={setCrucialError:h,setUserData:Object(g.a)("SET_USER_DATA"),setRates:Object(g.a)("SET_RATES"),setUserCurrency:Object(g.a)("SET_USER_CURRENCY"),setExchangeFromCurrency:Object(g.a)("SET_EXCHANGE_FROM_CURRENCY"),setExchangeToCurrency:Object(g.a)("SET_EXCHANGE_TO_CURRENCY"),setExchangeSum:Object(g.a)("SET_EXCHANGE_SUM"),setIsExchangeSumAvailable:Object(g.a)("IS_EXCHANGE_SUM_AVAILABLE"),updateUserBalance:Object(g.a)("UPDATE_USER_BALANCE"),managePreloader:Object(g.a)("MANAGE_SCREEN_BLOCKING"),setPreloaderMessage:Object(g.a)("SET_PRELOADER_MESSAGE")},_=n(6),E={EUR:{shortName:"eur",fullName:"Euro",code:"EUR",number:978,symbol:"\u20ac",htmlCode:"&euro;"},USD:{shortName:"usd",fullName:"US Dollar",code:"USD",number:840,symbol:"$",htmlCode:"&#36;"},GBP:{shortName:"gbp",fullName:"Pound Sterling",code:"GBP",number:826,symbol:"\xa3",htmlCode:"&pound;"},JPY:{shortName:"jpy",fullName:"Japanese Yen",code:"JPY",number:392,symbol:"\xa5",htmlCode:"&yen;"}},v={name:"Vlad",surname:"Pocheptcov",mainCurrency:E.USD.code,account:{EUR:{symbol:E.EUR.code,amount:"2100"},USD:{symbol:E.USD.code,amount:"4623.05"},GBP:{symbol:E.GBP.code,amount:"4319.49"},JPY:{symbol:E.JPY.code,amount:"35123.48"}}},y=(a=v,function(){return new Promise(function(e,t){setTimeout(function(){return e(a)},1800)})}),j=function(e){return(t=e.status)>=200&&t<300?Promise.resolve(e):Promise.reject("API response: ".concat(e.statusText));var t},O=function(e){return e.json()},x=function(e){return R.BASE_URL+e+"?app_id=".concat(R.KEY)},C=function(e){return R.BASE_URL+e+"?app_id=".concat(R.FAKE_KEY)},S=function(e){return function(t){return function(n){return Object.entries(n).reduce(function(e,t){var n=Object(f.a)(t,2),a=n[0],r=n[1];return e+"&".concat(a,"=").concat(r)},e(t))}}},N=function(e){return fetch(e).then(j).then(O)},R={KEY:"45df0613a845463591657cc7242dd4c0",FAKE_KEY:"qwerty12345",BASE_URL:"https://openexchangerates.org/api"},W="/latest.json",k={getBasicRates:function(){var e=W,t={base:v.mainCurrency,symbols:Object.values(E).map(function(e){return e.code}).join(",")},n=S(x)(e)(t);return console.log(n),N(n)},getBasicRatesWithError:function(){var e=W,t={base:v.baseSymbol,symbols:"".concat(E.EUR.code,",").concat(E.USD.code,",").concat(E.GBP.code)},n=S(C)(e)(t);return console.log("url requested = ",n),N(n)}},U=function(e,t){var n=Object.keys(t),a=n.indexOf(e);return n[a===n.length-1?0:a+1]},A=/^$|(^\d{1,10}(\.\d{0,2})?$)/,T=n(3),P=n(32),B=n.n(P),w=function(e){return B()(e)},F=function(e){return function(t){return e.lte(t)}},D=function(e){return function(t){return(n=w(e),function(e){return n.div(e)})(t);var n}},M=function(e){return function(t){return function(n){return(a=D(t)(n),function(e){return a.times(e)})(e);var a}}},I=n(8),H=function(e){return"We see that some error occurred because of the following reason:\n".concat(e)},Y=function(e,t){e(b.managePreloader(!0)),e(b.setPreloaderMessage(t))},G=function(e){e(b.managePreloader(!1)),e(b.setPreloaderMessage(""))},L=function(e,t,n){console.error(t),e(b.setCrucialError(n))},J=n(61),K=n(65),q=n(16),X=n.n(q),V=n(33),Q=n.n(V),Z=function(e){return c.a.createElement("button",{type:e.type,className:Q.a.btn,onClick:e.clickHandler,title:e.title},e.text)},$=n(34),z=n.n($),ee=function(e){return c.a.createElement("img",{src:z.a,style:{width:e.width,height:e.height},alt:"astronaut"})};ee.defaultProps={width:"40px",height:"40px"};var te=ee,ne=function(e){return c.a.createElement("article",{className:X.a.page},c.a.createElement("h4",{className:"visuallyhidden",hidden:!0},"Error"),c.a.createElement("div",{className:X.a.infoWrap},c.a.createElement("span",{className:X.a.title},"Oops!"),c.a.createElement("p",{className:X.a.message},e.message),c.a.createElement("div",{className:X.a.btnWrap},c.a.createElement(Z,{text:e.buttonText,type:"button",clickHandler:e.buttonClickHandler}))),c.a.createElement("div",{className:X.a.decorWrap},c.a.createElement("div",{className:X.a.animation},c.a.createElement(te,{width:"100%",height:"100%"}))))};ne.defaultProps={message:"Some undetected error occurred"};var ae=ne,re="/",ce=n(2),oe=n.n(ce),ue=n(1),se=n.n(ue),ie=function(e){return c.a.createElement("div",{className:oe.a.currencyStateElem},c.a.createElement("span",{className:oe.a.heading},e.currency),c.a.createElement("small",{className:oe.a.label},function(e,t){var n=E[e].symbol;return c.a.createElement(r.Fragment,null,"You have ",c.a.createElement("span",{className:oe.a.small},n),t)}(e.currency,e.balance)))};ie.propsTypes={currency:se.a.string.isRequired,balance:se.a.string.isRequired};var le=ie,me=n(35),pe=function(e){return Object(I.get)(e.exchange,"fromCurrency")},de=function(e){return Object(I.get)(e.exchange,"toCurrency")},fe=function(e){return Object(I.get)(e.user,"account")},ge=function(e){return Object(I.get)(e.exchange,"sum")},he=function(e){return e.user.account[e.exchange.fromCurrency].amount},be=Object(me.a)([ge,he],function(e,t){return F(w(e||0))(t)}),_e=n(18),Ee=n.n(_e),ve=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).inputRef=c.a.createRef(),n.handleSumChange=function(e){var t=e.target.value;A.test(t)&&n.props.dispatchSum(t)},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.inputRef.current.focus()}},{key:"render",value:function(){var e,t=Ee()((e={},Object(T.a)(e,oe.a.label,!0),Object(T.a)(e,oe.a.inputTip,!0),Object(T.a)(e,oe.a.on,!this.props.exchangeSum||this.props.exchangeSum&&!this.props.isAvailable),e)),n=this.props.exchangeSum?this.props.isAvailable?"":"overbalanced":"type the sum";return c.a.createElement("div",{className:"".concat(oe.a.sumInputWrap," ").concat(oe.a.heading),"data-value":this.props.exchangeSum},this.props.exchangeSum&&c.a.createElement("span",{className:oe.a.sign},"\u2014 "),c.a.createElement("input",{className:oe.a.sumInput,type:"text",id:"sum",value:this.props.exchangeSum,name:"exchange-sum",onChange:this.handleSumChange,ref:this.inputRef}),c.a.createElement("label",{htmlFor:"sum",className:t},n))}}]),t}(r.Component);ve.propsTypes={changeHandler:se.a.func.isRequired,value:se.a.string};var ye=Object(d.b)(function(e){return{exchangeSum:ge(e),max:he(e),isAvailable:be(e)}},function(e){return{dispatchSum:function(t){e(b.setExchangeSum(t))}}})(ve),je=function(e){return{userAccount:fe(e),exchange:function(e){return Object(I.get)(e,"exchange")}(e)}},Oe=function(e,t){var n=function(n){function a(){return Object(s.a)(this,a),Object(l.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(p.a)(a,n),Object(i.a)(a,[{key:"render",value:function(){var n=this,a=function(e){switch(e){case"from":return n.props.exchange.fromCurrency;case"to":return n.props.exchange.toCurrency;default:return console.error("An error occurred. Please check CurrencyStatePropsProxy function to clarify"),!1}}(t);return a?c.a.createElement(e,{currency:a,balance:this.props.userAccount[a].amount}):c.a.createElement("span",null,"n/d")}}]),a}(r.Component);return Object(d.b)(je)(n)},xe=function(e){return{fromCurrency:pe(e),toCurrency:de(e),userCurrencies:fe(e)}},Ce=function(e){return{changeFormCurrency:function(t){e(b.setExchangeFromCurrency(t))},changeToCurrency:function(t){e(b.setExchangeToCurrency(t))}}},Se=function(e,t){var n=function(n){function a(){return Object(s.a)(this,a),Object(l.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(p.a)(a,n),Object(i.a)(a,[{key:"componentDidUpdate",value:function(){this.props.fromCurrency===this.props.toCurrency&&this.props.changeToCurrency(U(this.props.fromCurrency,this.props.userCurrencies))}},{key:"render",value:function(){return c.a.createElement(e,{changeCurrencyHandler:"from"===t?this.props.changeFormCurrency:this.props.changeToCurrency,userCurrencies:this.props.userCurrencies,currentCurrency:"from"===t?this.props.fromCurrency:this.props.toCurrency})}}]),a}(r.Component);return Object(d.b)(xe,Ce)(n)},Ne=function(e){var t,n,a,o,u=e.exchangeSum,s=e.fromCurrency,i=e.toCurrency,l=e.rates,m=M(u||0)(l[i])(l[s]).toFixed(2),p=M(1)(l[i])(l[s]).toFixed(2),d=Ee()((t={},Object(T.a)(t,oe.a.heading,!0),Object(T.a)(t,oe.a.off,!u),t));return c.a.createElement("div",{className:oe.a.exchangeResult},c.a.createElement("span",{className:d},c.a.createElement("span",{className:oe.a.sign},"+ "),m),c.a.createElement("small",{className:oe.a.label},(n=s,a=i,o=p,c.a.createElement(r.Fragment,null,c.a.createElement("span",{className:oe.a.small},E[n].symbol),"1 =",c.a.createElement("span",{className:oe.a.small},E[a].symbol),o))))};Ne.propsTypes={exchangeSum:se.a.string,rate:se.a.string,fromCurrency:se.a.string,toCurrency:se.a.string};var Re=Object(d.b)(function(e){return{exchangeSum:ge(e),fromCurrency:pe(e),toCurrency:de(e),rates:function(e){return Object(I.get)(e.rates,"rates")}(e)}})(Ne),We=n(21),ke=n.n(We),Ue=function(e){var t=e.userCurrencies,n=e.currentCurrency,a=e.changeCurrencyHandler;return c.a.createElement("nav",{className:ke.a.elem},c.a.createElement("ul",{className:ke.a.list},Object.keys(t).map(function(e){var t,r;return c.a.createElement("li",{className:ke.a.item,key:Object(I.uniqueId)()},c.a.createElement("button",{className:Ee()((t={},Object(T.a)(t,ke.a.btn,!0),Object(T.a)(t,ke.a.active,e===n),t)),type:"button",title:e,onClick:(r=e,function(){a(r)})}))})))},Ae={updateBalance:function(){return function(e,t){var n,a=t(),r=a.exchange,c=r.fromCurrency,o=r.toCurrency,u=r.sum,s=a.user.account,i=a.rates.rates,l=function(e,t,n,a,r){var c,o;return Object(_.a)({},e,(c={},Object(T.a)(c,t,{symbol:t,amount:(o=w(e[t].amount),function(e){return o.minus(e)})(n).toFixed(2)}),Object(T.a)(c,a,{symbol:a,amount:function(e){return function(t){return e.plus(t)}}(w(e[a].amount))(r).toFixed(2)}),c))}(s,c,u,o,M(u)(i[o])(i[c]).toFixed(4));Y(e,"Updating your account..."),(n=l,new Promise(function(e,t){var a={status:200,message:"Yor balance successfully updated",balance:Object(_.a)({},n)};setTimeout(function(){return e(a)},1200)})).then(function(t){if(200!==t.status)throw Error(t.message);e(b.updateUserBalance(t.balance)),e(b.setExchangeSum("")),G(e)}).catch(function(t){var n=H(t.message);L(e,t,n),G(e)})}}},Te=Object(d.b)(function(e){return{exchangeSum:ge(e),isAvailable:be(e)}},Ae)(function(e){var t=!e.isAvailable||F(w(e.exchangeSum||0))(0);return c.a.createElement("button",{className:oe.a.exchangeBtn,type:"button",disabled:t,onClick:e.updateBalance},"Exchange")}),Pe=Oe(le,"from"),Be=Oe(le,"to"),we=Se(Ue,"from"),Fe=Se(Ue,"to"),De=function(){return c.a.createElement("article",{className:oe.a.exchangeWidget},c.a.createElement("div",{className:oe.a.wrap},c.a.createElement("header",{className:oe.a.header},c.a.createElement("h1",{className:"visuallyhidden"},"Ex Widget"),c.a.createElement("div",{className:oe.a.container},c.a.createElement(Te,null))),c.a.createElement("div",{className:oe.a.partConvertFrom},c.a.createElement("div",{className:oe.a.container},c.a.createElement("div",{className:oe.a.form},c.a.createElement(Pe,null),c.a.createElement(ye,null))),c.a.createElement("div",{className:oe.a.navWrap},c.a.createElement(we,null))),c.a.createElement("div",{className:oe.a.partConvertTo},c.a.createElement("div",{className:oe.a.container},c.a.createElement("div",{className:oe.a.form},c.a.createElement(Be,null),c.a.createElement(Re,null))),c.a.createElement("div",{className:oe.a.navWrap},c.a.createElement(Fe,null)))))},Me={updateRates:function(){return function(e,t){return k.getBasicRates().then(function(n){var a=n.base,r=n.rates,c=n.timestamp,o=t().rates,u={base:a,rates:r,timestamp:c};Object(I.isEqual)(o,u)||e(b.setRates(u))},function(e){var t=H("API response ".concat(e));return Promise.reject(t)})}},setCrucialError:h},Ie=n(22),He=n.n(Ie),Ye=function(e){return c.a.createElement("div",{className:He.a.preloader},c.a.createElement("div",{className:He.a.inner},e.message&&c.a.createElement("div",{className:He.a.messageWrap},e.message),c.a.createElement("svg",{className:He.a.spinner,viewBox:"0 0 50 50"},c.a.createElement("circle",{className:He.a.path,cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:"5"}))))};Ye.defaultProps={isActive:!1,message:""};var Ge,Le,Je,Ke=Ye,qe=function(e){var t=function(t){function n(){var e,t;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=Object(l.a)(this,(e=Object(m.a)(n)).call.apply(e,[this].concat(r)))).interval={id:0},t}return Object(p.a)(n,t),Object(i.a)(n,[{key:"componentDidMount",value:function(){!function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:25e3,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return function o(u){return t().then(function(){e.id=setTimeout(function(){return o(1)},r)}).catch(function(t){if(u>a)return clearTimeout(e.id),void n(t);e.id=setTimeout(function(){return o(++u)},c)})}}(this.interval,this.props.updateRates,this.props.setCrucialError)(1)}},{key:"componentWillUnmount",value:function(){var e;e=this.interval,clearTimeout(e)}},{key:"render",value:function(){return c.a.createElement(e,null)}}]),n}(r.Component);return Object(d.b)(null,Me)(t)}(Object(d.b)(function(e){return{isDataReady:function(e){return!(!Object(I.get)(e,"rates")||!Object(I.get)(e,"user"))}(e)}})(function(e){return e.isDataReady?c.a.createElement(De,null):c.a.createElement(Ke,null)})),Xe=function(){window.location.reload()},Ve=function(e){return c.a.createElement(ae,{message:"Page not found",buttonText:"Home",buttonClickHandler:e.buttonClickHandler})},Qe=Object(d.b)(function(e){return{hasError:!function(e){return Object(I.get)(e.appStatus,"works")}(e),errorMessage:function(e){return Object(I.get)(e.appStatus,"errorMessage")}(e)}})(function(e){return e.hasError?c.a.createElement(J.a,{render:function(){return c.a.createElement(ae,{message:e.errorMessage,buttonText:"Reload",buttonClickHandler:Xe})}}):c.a.createElement(K.a,null,c.a.createElement(J.a,{path:re,exact:!0,render:function(){return c.a.createElement(qe,null)}}),c.a.createElement(J.a,{render:function(){return c.a.createElement(Ve,{buttonClickHandler:(t=e.history,function(){t.push("/")})});var t}}))}),Ze=n(66),$e=Object(d.b)(function(e){return{isActive:function(e){return Object(I.get)(e.ui.preloaderBlock,"isActive")}(e),message:function(e){return Object(I.get)(e.ui.preloaderBlock,"message")}(e)}})(function(e){return e.isActive&&c.a.createElement(Ke,null)}),ze={getUserData:function(){return function(e){y().then(function(t){e(b.setExchangeFromCurrency(t.mainCurrency)),e(b.setExchangeToCurrency(U(t.mainCurrency,t.account))),e(b.setUserData(t))}).catch(function(t){var n=H('"'.concat(t,'"'));L(e,t,n)})}}},et=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).initialUploadCallback=function(){n.setState(function(){return{isPending:!1}})},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.getUserData()}},{key:"render",value:function(){return c.a.createElement("div",{className:"app"},c.a.createElement(Qe,this.props),c.a.createElement($e,null))}}]),t}(r.Component),tt=Object(Ze.a)(Object(d.b)(null,ze)(et)),nt=n(68),at=n(15),rt=n(38),ct=n(67),ot=Object(ct.a)(Object(T.a)({},b.setCrucialError,function(e,t){var n=t.payload;return{works:!1,errorMessage:void 0===n?"Undefined error occurred. Please contact the support":n}}),{works:!0,errorMessage:""}),ut=Object(ct.a)((Ge={},Object(T.a)(Ge,b.setUserData,function(e,t){return t.payload}),Object(T.a)(Ge,b.setUserCurrency,function(e,t){var n=t.payload;return Object(_.a)({},e,{mainCurrency:n})}),Object(T.a)(Ge,b.updateUserBalance,function(e,t){var n=t.payload;return Object(_.a)({},e,{account:n})}),Ge),null),st=Object(ct.a)(Object(T.a)({},b.setRates,function(e,t){return t.payload}),null),it=Object(ct.a)((Le={},Object(T.a)(Le,b.setExchangeFromCurrency,function(e,t){var n=t.payload;return Object(_.a)({},e,{fromCurrency:n})}),Object(T.a)(Le,b.setExchangeToCurrency,function(e,t){var n=t.payload;return Object(_.a)({},e,{toCurrency:n})}),Object(T.a)(Le,b.setExchangeSum,function(e,t){var n=t.payload;return Object(_.a)({},e,{sum:n})}),Object(T.a)(Le,b.setIsExchangeSumAvailable,function(e,t){var n=t.payload;return Object(_.a)({},e,{isAvailable:n})}),Le),{fromCurrency:"",toCurrency:"",sum:"",isSumAvailable:!0}),lt=Object(ct.a)((Je={},Object(T.a)(Je,b.managePreloader,function(e,t){var n=t.payload;return Object(_.a)({},e,{preloaderBlock:Object(_.a)({},e.preloaderBlock,{isActive:n})})}),Object(T.a)(Je,b.setPreloaderMessage,function(e,t){var n=t.payload,a=void 0===n?"":n;return Object(_.a)({},e,{preloaderBlock:Object(_.a)({},e.preloaderBlock,{message:a})})}),Je),{preloaderBlock:{isActive:!1,message:""}}),mt=Object(at.combineReducers)({appStatus:ot,user:ut,rates:st,exchange:it,ui:lt}),pt=n(39),dt=Object(at.createStore)(mt,Object(rt.composeWithDevTools)(Object(at.applyMiddleware)(pt.a))),ft=document.getElementById("root");u.a.render(c.a.createElement(d.a,{store:dt},c.a.createElement(nt.a,null,c.a.createElement(tt,null))),ft)}},[[41,2,1]]]);
//# sourceMappingURL=main.efc151b5.chunk.js.map